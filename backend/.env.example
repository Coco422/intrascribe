# Intrascribe Microservices Environment Configuration
# Copy this file to .env and configure with your actual values

# ===============================================
# üóÑÔ∏è Database Configuration (Supabase)
# ===============================================
SUPABASE_URL=https://your-project-ref.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.your-anon-key
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.your-service-role-key

# Optional: Direct PostgreSQL connection (if using separate DB)
DATABASE_URL=postgresql://user:password@localhost:5432/intrascribe

# ===============================================
# üî¥ Redis Configuration  
# ===============================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
# Full Redis URL (alternative format)
REDIS_URL=redis://localhost:6379/0

# ===============================================
# ü§ñ AI Services Configuration
# ===============================================

# OpenAI Configuration
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_ORG_ID=org-your-organization-id

# Anthropic Configuration  
ANTHROPIC_API_KEY=sk-ant-your-anthropic-api-key-here

# AI Model Configuration
DEFAULT_LLM_MODEL=gpt-3.5-turbo
AI_MAX_TOKENS=4000
AI_TEMPERATURE=0.7
AI_TIMEOUT_SECONDS=120

# Alternative models (uncomment to enable)
# AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com/
# AZURE_OPENAI_API_KEY=your-azure-key
# AZURE_OPENAI_API_VERSION=2024-02-01

# ===============================================
# üéß LiveKit Configuration
# ===============================================
LIVEKIT_API_URL=wss://your-livekit-instance.livekit.cloud
LIVEKIT_API_KEY=your-livekit-api-key
LIVEKIT_SECRET=your-livekit-secret-key

# Agent Configuration
AGENT_NAME=intrascribe-transcription-agent
AGENT_ROOM_PREFIX=intrascribe_room_

# ===============================================
# ü§ó HuggingFace Configuration
# ===============================================
HUGGINGFACE_TOKEN=hf_your-huggingface-token-here

# Model Configuration
STT_MODEL_NAME=iic/SenseVoiceSmall
DIARIZATION_MODEL_NAME=pyannote/speaker-diarization-3.1

# ===============================================
# üîß Service Configuration
# ===============================================

# Environment
ENVIRONMENT=development
LOG_LEVEL=INFO
DEBUG=true

# Service URLs (for development - Docker uses internal URLs)
API_SERVICE_URL=http://localhost:8000
STT_SERVICE_URL=http://localhost:8001  
DIARIZATION_SERVICE_URL=http://localhost:8002

# Service API Security (optional)
SERVICE_API_KEY=your-internal-service-api-key
JWT_SECRET_KEY=your-jwt-secret-key-here
JWT_ALGORITHM=HS256
JWT_EXPIRE_HOURS=24

# ===============================================
# üéôÔ∏è STT Service Configuration
# ===============================================

# Model Configuration
STT_MODEL_DIR=/app/models
STT_OUTPUT_DIR=/tmp/audio
STT_SAMPLE_RATE=16000
STT_LANGUAGE_AUTO_DETECT=true

# Performance Settings
STT_MAX_CONCURRENT_REQUESTS=5
STT_REQUEST_TIMEOUT=300
STT_MODEL_CACHE_SIZE=1

# ===============================================
# üë• Diarization Service Configuration  
# ===============================================

# Diarization Settings
MIN_SEGMENT_DURATION=1.0
MAX_SPEAKERS=10
DIARIZATION_TIMEOUT=600

# Model Performance
DIARIZATION_BATCH_SIZE=1
DIARIZATION_GPU_MEMORY_FRACTION=0.8

# ===============================================
# üìä API Service Configuration
# ===============================================

# Server Configuration
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4

# Session Management
SESSION_TIMEOUT_HOURS=24
TRANSCRIPTION_RETENTION_DAYS=30
AUDIO_UPLOAD_MAX_SIZE_MB=100

# Rate Limiting
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_BURST=10

# ===============================================
# üßë‚Äçüíª Development Settings
# ===============================================

# Development Features
ENABLE_CORS=true
ENABLE_DETAILED_ERRORS=true
ENABLE_REQUEST_LOGGING=true

# Testing
TEST_DATABASE_URL=postgresql://test:test@localhost:5433/intrascribe_test
TEST_REDIS_URL=redis://localhost:6380/1

# ===============================================
# üè≠ Production Settings
# ===============================================

# Security
SECURE_COOKIES=true
HTTPS_ONLY=true
CORS_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# Monitoring
ENABLE_METRICS=true
METRICS_PORT=9090
HEALTH_CHECK_INTERVAL=30

# Scaling
MAX_WORKERS_PER_SERVICE=4
WORKER_MEMORY_LIMIT_MB=2048

# ===============================================
# üê≥ Docker Configuration
# ===============================================

# Image tags (for production)
IMAGE_TAG=latest
REGISTRY_URL=your-registry.com/intrascribe

# Volume paths (for development)
MODELS_VOLUME_PATH=./models
AUDIO_VOLUME_PATH=./temp_audio
LOGS_VOLUME_PATH=./logs

# ===============================================
# üìù Optional Integrations
# ===============================================

# Webhook Configuration
WEBHOOK_SECRET=your-webhook-secret
WEBHOOK_URL=https://your-app.com/webhooks/intrascribe

# Email Service (for notifications)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-app-password

# Cloud Storage (alternative to Supabase storage)
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_S3_BUCKET=intrascribe-audio-files
AWS_REGION=us-east-1

# ===============================================
# üìä Analytics and Monitoring
# ===============================================

# Sentry (Error Tracking)
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# Analytics
ANALYTICS_API_KEY=your-analytics-key

# ===============================================
# üîí Security Settings
# ===============================================

# Encryption
ENCRYPTION_KEY=your-32-character-encryption-key-here
DATA_ENCRYPTION_ENABLED=true

# Password Requirements
MIN_PASSWORD_LENGTH=8
REQUIRE_SPECIAL_CHARS=true

# Session Security
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_SAMESITE=lax

# ===============================================
# ‚öôÔ∏è Feature Flags
# ===============================================

# AI Features
ENABLE_AI_SUMMARY=true
ENABLE_AI_TITLE_GENERATION=true
ENABLE_REAL_TIME_TRANSCRIPTION=true

# Audio Processing
ENABLE_SPEAKER_DIARIZATION=true
ENABLE_NOISE_REDUCTION=false
ENABLE_AUDIO_ENHANCEMENT=false

# User Features
ENABLE_USER_REGISTRATION=true
ENABLE_GUEST_SESSIONS=false
ENABLE_BATCH_TRANSCRIPTION=true

# ===============================================
# üìà Performance Tuning
# ===============================================

# Connection Pooling
DB_POOL_SIZE=10
DB_POOL_OVERFLOW=20
DB_POOL_TIMEOUT=30

# Cache Configuration  
REDIS_POOL_SIZE=10
CACHE_DEFAULT_TTL=3600
SESSION_CACHE_TTL=86400

# Request Timeouts
HTTP_CLIENT_TIMEOUT=30
STT_SERVICE_TIMEOUT=300
DIARIZATION_TIMEOUT=600
AI_SERVICE_TIMEOUT=120

# ===============================================
# üìç Service Discovery (for production)
# ===============================================

# Consul/Kubernetes Service Discovery
SERVICE_DISCOVERY_ENABLED=false
CONSUL_HOST=localhost
CONSUL_PORT=8500

# Health Check Configuration
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=5
HEALTH_CHECK_RETRIES=3

# ===============================================
# üîß Development Helpers
# ===============================================

# Auto-reload (development only)
AUTO_RELOAD=true
HOT_RELOAD_TEMPLATES=true

# Debug Configuration
ENABLE_SQL_LOGGING=false
ENABLE_PERFORMANCE_PROFILING=false
ENABLE_REQUEST_TRACING=false

# Testing
ENABLE_TEST_ENDPOINTS=false
TEST_DATA_ENABLED=false
